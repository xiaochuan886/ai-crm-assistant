
# 产品需求文档 (PRD)
## AI 业务助理 - CRM 智能体产品

---

**文档版本**: v1.0  
**创建日期**: 2025-10-05  
**产品负责人**: [待填写]  
**文档状态**: Draft  

---

## 目录

1. [产品概述](#1-产品概述)
2. [市场分析](#2-市场分析)
3. [产品定位与战略](#3-产品定位与战略)
4. [用户画像](#4-用户画像)
5. [核心功能需求](#5-核心功能需求)
6. [产品架构](#6-产品架构)
7. [技术实现方案](#7-技术实现方案)
8. [产品路线图](#8-产品路线图)
9. [商业模式](#9-商业模式)
10. [成功指标](#10-成功指标)
11. [风险与挑战](#11-风险与挑战)

---

## 1. 产品概述

### 1.1 产品愿景
打造一个**可插拔式、跨平台的 AI 业务助理**，通过自然语言交互赋能企业 CRM 系统，将传统的表单驱动操作模式升级为对话驱动模式，并通过主动提醒、数据分析和预测性建议，从"工具"进化为企业团队不可或缺的"AI 同事"。

### 1.2 产品定义
**AI 业务助理**是一款基于大型语言模型（LLM）和 LangChain 智能体框架的 SaaS 产品，它以 iframe 插件或独立 Web 应用的形式，无缝嵌入现有 CRM 系统（如 Salesforce、HubSpot、销售易、纷享销客等），实现：
- **被动执行**：通过自然语言完成客户、订单、工单等业务实体的创建、查询、更新和删除。
- **主动服务**：基于业务规则引擎，主动提醒用户关键业务节点、风险预警和机会识别。
- **智能分析**：提供对话式数据分析，让用户无需学习复杂报表即可获取业务洞察。

### 1.3 核心价值主张
- **效率革命**：将 2 分钟的表单操作缩短为 10 秒的对话。
- **降低门槛**：新员工无需复杂培训，通过自然语言即可上手。
- **业务赋能**：不仅执行任务，更主动发现问题、提出建议，成为真正的业务伙伴。
- **零迁移成本**：可插拔设计，客户无需更换现有 CRM 系统。

---

## 2. 市场分析

### 2.1 目标市场
- **TAM (Total Addressable Market)**：全球 CRM 市场规模约 650 亿美元（2024），中国市场约 80 亿美元。
- **SAM (Serviceable Addressable Market)**：中小型企业（50-500 人）使用 CRM 的企业，约占 TAM 的 30%。
- **SOM (Serviceable Obtainable Market)**：初期聚焦垂直行业（医疗、法律、金融服务），目标 3 年内获得 0.5% 的市场份额。

### 2.2 竞争分析

| 竞品类型 | 代表产品 | 优势 | 劣势 | 我们的差异化 |
|---------|---------|------|------|-------------|
| CRM 原生 AI | Salesforce Einstein Copilot, HubSpot ChatSpot | 原生集成、用户基础大 | 功能浅薄、无法跨平台、定制化能力弱 | 跨平台、深度业务理解、主动性 |
| 通用 AI 助手 | ChatGPT, Claude | 强大的语言理解能力 | 无 CRM 集成、无业务规则引擎、无权限控制 | CRM 深度集成、业务逻辑内置 |
| RPA 工具 | UiPath, Automation Anywhere | 自动化执行能力强 | 需要固定流程、无自然语言交互、维护成本高 | 柔性对话交互、适应变化 |

### 2.3 市场机会
- **AI 原生应用窗口期**：当前大多数企业尚未部署 AI 能力，存在 1-2 年的窗口期。
- **中小企业 CRM 痛点突出**：中小企业 CRM 使用率低、数据质量差，对提效工具需求强烈但预算有限，是理想的早期客户。
- **垂直行业未被满足的需求**：医疗、法律等行业有独特的业务流程和术语，通用 CRM 无法很好满足，存在深耕机会。

---

## 3. 产品定位与战略

### 3.1 产品定位
**"CRM 之上的智能操作系统"** - 我们不替代 CRM，而是让 CRM 变得更智能、更易用。

### 3.2 三阶段演进战略

#### 阶段一（0-12 个月）：响应式执行者 (Reactive Executor)
- **目标**：建立信任，形成用户习惯。
- **核心功能**：自然语言 CRUD 操作、智能信息补全、模糊匹配。
- **商业目标**：获得 20-50 家种子客户，验证 PMF（产品市场契合度）。

#### 阶段二（12-24 个月）：主动式顾问 (Proactive Advisor)
- **目标**：创造增量价值，提升用户依赖度。
- **核心功能**：主动业务提醒、对话式数据分析。
- **商业目标**：扩展至 200+ 企业客户，建立行业标杆案例。

#### 阶段三（24-36 个月）：战略性伙伴 (Strategic Partner)
- **目标**：构建数据和模型护城河，成为不可替代的业务工具。
- **核心功能**：预测性分析、自动化策略执行。
- **商业目标**：进入规模化阶段，探索行业扩展和国际化。

### 3.3 垂直化战略
初期不追求"服务所有 CRM"，而是选择 1-2 个垂直行业深耕：
- **首选行业**：医疗健康（诊所、体检中心）、专业服务（律所、咨询公司）。
- **理由**：这些行业的业务流程复杂且标准化程度高，对效率工具支付意愿强，且 CRM 巨头覆盖不深。

---

## 4. 用户画像

### 4.1 主要用户角色

#### 角色 1：一线业务人员（销售、客服、客户成功经理）
- **年龄**：25-40 岁
- **痛点**：
  - 每天需要在 CRM 中录入大量重复性数据，耗时且枯燥。
  - CRM 界面复杂，需要多次点击才能完成一个操作。
  - 容易遗漏关键的跟进节点（如客户生日、合同续约）。
- **期望**：
  - 快速完成数据录入，有更多时间服务客户。
  - 系统能主动提醒重要事项。
- **使用场景**：
  - 在拜访客户后，语音输入："刚见了张总，他对我们的方案很满意，计划下周签约，金额 50 万。"AI 自动创建商机并更新客户状态。

#### 角色 2：销售/业务经理
- **年龄**：30-45 岁
- **痛点**：
  - 需要经常查看团队业绩、漏斗转化率等数据，但 CRM 报表复杂难懂。
  - 无法及时发现团队成员的问题（如某人的跟进不及时）。
  - 数据分散在多个报表中，难以快速决策。
- **期望**：
  - 能随时通过自然语言询问团队数据。
  - 系统能主动预警风险（如某重要客户长时间无人跟进）。
- **使用场景**：
  - 早会前问 AI："本周团队的销售漏斗健康度如何？有哪些卡在'商务谈判'阶段超过 7 天的客户？"

#### 角色 3：企业决策者（CEO、运营总监）
- **年龄**：35-55 岁
- **痛点**：
  - 需要数据支持决策，但缺乏数据分析能力或时间。
  - 传统 BI 工具部署和使用成本高。
- **期望**：
  - 用最简单的方式获取业务洞察和预测。
- **使用场景**：
  - 问 AI："根据当前的销售趋势，我们 Q4 能完成年度目标吗？如果不能，差距在哪里？"

### 4.2 次要用户角色
- **IT 管理员**：负责产品部署和权限配置。
- **CRM 管理员**：负责配置业务规则和字段映射。

---

## 5. 核心功能需求

### 5.1 阶段一核心功能（MVP）

#### 功能模块 1：自然语言任务执行引擎

**5.1.1 功能描述**  
用户通过自然语言对话，完成 CRM 中的 CRUD（创建、读取、更新、删除）操作，无需手动填写表单。

**5.1.2 用户故事**
- **US-001**：作为销售人员，我希望通过一句话"帮我创建一个客户，叫李明，电话 13800138000，公司是腾讯"，就能在 CRM 中新建客户记录。
- **US-002**：作为客服，我希望说"帮王刚创建一个工单，问题是产品无法激活"，系统能自动识别"王刚"的客户 ID 并创建工单。
- **US-003**：作为销售经理，我希望问"张三上个月创建了几个商机"，AI 能查询并回答。

**5.1.3 功能要点**
- 支持的实体类型：客户（Customer）、联系人（Contact）、商机/订单（Opportunity/Order）、工单（Ticket）。
- 支持的操作类型：创建、查询、更新、删除。
- 多轮对话能力：当信息不全时，AI 主动追问缺失的必填字段。
- 用户确认机制：在执行写操作前，向用户展示即将执行的操作摘要，等待确认。

**5.1.4 验收标准**
- 单轮对话的信息提取准确率 ≥ 90%。
- 多轮对话的任务完成率 ≥ 85%（3 轮以内）。
- API 调用成功率 ≥ 99%。

---

#### 功能模块 2：智能信息匹配与消歧引擎

**5.1.5 功能描述**  
当用户提供的信息模糊、不完整或存在错别字时，系统通过分层查询和模糊匹配，找到最可能的匹配项，并向用户确认。

**5.1.6 用户故事**
- **US-004**：作为销售，我说"给李总下个单"，但系统中有 3 个客户姓李，AI 能列出这 3 个客户让我选择。
- **US-005**：作为销售，我说"下一个综合检测的订单"，但系统中没有名为"综合检测"的产品，只有"综合健康检测报告"，AI 能智能匹配并询问"您是指'综合健康检测报告'吗？"

**5.1.7 功能要点**
- **分层查询机制**：
  - **L1（快速查询）**：直接调用 CRM API 的搜索接口，使用数据库 LIKE 查询。
  - **L2（深度模糊匹配）**：当 L1 无结果时，从内存缓存中，使用模糊匹配算法（如 `thefuzz` 库）进行相似度计算。
- **缓存机制**：系统每小时从 CRM 拉取产品、客户等主数据到内存或 Redis，供 L2 查询使用。
- **多匹配项处理**：当存在多个高相似度结果时（相似度 > 70%），以列表形式展示给用户，由用户选择。

**5.1.8 验收标准**
- 对于常见别名和错别字（编辑距离 ≤ 2），匹配准确率 ≥ 85%。
- L2 查询响应时间 < 1 秒。

---

#### 功能模块 3：业务规则校验引擎

**5.1.9 功能描述**  
在执行写操作前，自动校验业务规则（如价格限制、必填字段依赖），如果不满足，阻止执行并向用户说明原因及所需补充信息。

**5.1.10 用户故事**
- **US-006**：作为销售，我想创建一个订单，成交价 80 元，但产品限价是 100 元，AI 应阻止我并提示"成交价低于限价，请提供价格说明"。
- **US-007**：当我补充"这是本月的特批折扣"后，AI 应接受并完成订单创建。

**5.1.11 功能要点**
- **规则定义方式**：
  - 初期：在工具函数代码中硬编码规则逻辑。
  - 后期：从 YAML/JSON 配置文件中读取规则，实现规则与代码解耦。
- **常见规则类型**：
  - 字段依赖规则：当字段 A 满足条件 X 时，字段 B 变为必填。
  - 数值范围校验：价格、数量等字段的合理性检查。
  - 唯一性校验：如客户手机号不能重复。

**5.1.12 验收标准**
- 规则触发的准确率 = 100%（不能出现应该拦截但未拦截的情况）。
- 规则错误信息的清晰度：用户能理解错误原因的比例 ≥ 95%（通过用户反馈验证）。

---

#### 功能模块 4：可插拔式集成架构

**5.1.13 功能描述**  
产品以轻量级方式集成到客户现有 CRM 系统，无需修改 CRM 后端代码。

**5.1.14 技术架构**
- **前端集成方式**：
  - **iframe 嵌入**（推荐）：客户在 CRM 页面中嵌入一个 `<iframe>`，指向我们的 AI Widget URL。
  - **独立浮窗**：通过 JavaScript SDK，在客户 CRM 页面右下角渲染一个聊天浮窗。
- **认证与权限**：
  - CRM 主页面通过 `postMessage` API，将当前用户的 Auth Token 安全地传递给 iframe。
  - AI Widget 使用该 Token，在用户浏览器中直接调用 CRM 的 API。
  - 好处：我们的后端服务器不接触客户的敏感 Token，所有对 CRM 的数据操作权限天然继承自当前登录用户。

**5.1.15 CRM 适配器机制**
- **问题背景**：不同 CRM 系统的 API 端点、参数结构、字段命名差异巨大。
- **解决方案**：适配器模式（Adapter Pattern）。
  - 在 AI 后端内部，定义一套**标准的业务操作接口**（如 `InternalCreateCustomer`）。
  - 为每个支持的 CRM 系统（Salesforce、HubSpot 等）编写一个适配器模块。
  - 适配器负责将标准接口翻译为该 CRM 系统特定的 API 调用指令（method, endpoint, body）。
  - AI Agent 生成的不是直接的 API 调用，而是一个**标准化的执行指令 JSON**，由前端 Widget 根据当前 CRM 类型，选择对应适配器来解析和执行。

**5.1.16 集成流程**
1. 客户注册账号，选择其使用的 CRM 系统类型。
2. 我们提供一段嵌入代码（HTML + JS）。
3. 客户将代码粘贴到 CRM 页面的自定义脚本区域。
4. 用户访问 CRM 页面时，AI Widget 自动加载，完成 Token 握手，即可开始使用。

**5.1.17 验收标准**
- 客户从注册到完成集成的时间 < 30 分钟。
- 支持至少 3 个主流 CRM 系统（如 Salesforce, HubSpot, 销售易）。

---

### 5.2 阶段二核心功能

#### 功能模块 5：主动业务提醒引擎

**5.2.1 功能描述**  
系统不再被动等待用户提问,而是基于业务规则和数据状态变化，主动向用户发起提醒和预警。

**5.2.2 用户故事**
- **US-008**：作为销售，我希望当我负责的客户超过 7 天未跟进时，系统能主动提醒我。
- **US-009**：作为客户成功经理，我希望当某个客户的合同即将在 30 天内到期时，系统提前通知我启动续约流程。
- **US-010**：作为销售经理，我希望当团队中有工单超过 48 小时未响应时，系统能向我预警。

**5.2.3 功能要点**
- **触发器类型**：
  - **时间驱动型**：每天/周/月的固定时间执行检查（如每周五下午提醒本周未完成的任务）。
  - **事件驱动型**：当某个业务事件发生时触发（如工单状态变为"升级"）。
  - **状态驱动型**：当某个数据记录的状态满足特定条件时触发（如商机金额 > 100 万且停滞超过 7 天）。
- **提醒渠道**：
  - AI 聊天窗口内主动发起对话。
  - 集成第三方通讯工具（钉钉、企业微信、Slack、邮件）。
- **提醒的智能性**：
  - 避免打扰：用户可设置"免打扰时段"。
  - 优先级排序：当有多条提醒时，按业务影响程度排序。
  - 可操作性：提醒中包含快捷操作按钮（如"立即跟进"、"推迟到明天"）。

**5.2.4 技术实现**
- **后台任务调度器**：使用 Celery 或云服务（如 AWS EventBridge），定期扫描 CRM 数据。
- **规则引擎**：支持用户或管理员通过可视化界面配置提醒规则。

**5.2.5 验收标准**
- 提醒的准确率 ≥ 95%（不能出现误报或漏报）。
- 提醒的及时性：触发后 5 分钟内送达用户。
- 用户对提醒的有效性评价（通过反馈按钮）≥ 80% 认为"有帮助"。

---

#### 功能模块 6：对话式数据分析引擎

**5.2.6 功能描述**  
用户通过自然语言提问，AI 自动查询 CRM 数据，并以易于理解的自然语言和可视化图表形式返回分析结果。

**5.2.7 用户故事**
- **US-011**：作为销售经理，我想问"本月团队的销售额是多少"，AI 能直接告诉我数字并与上月对比。
- **US-012**：作为销售，我想问"哪些客户最近 30 天有过采购但本月没有"，AI 能列出客户清单。
- **US-013**：作为运营总监，我想问"过去 6 个月每个月的新增客户数趋势"，AI 能生成一个折线图。

**5.2.8 功能要点**
- **Text-to-Query 转换**：
  - LLM 将用户的自然语言问题，转换为对 CRM API 的查询指令（带过滤条件、聚合函数等）。
  - 对于复杂查询，可能需要多次 API 调用并在内存中进行二次计算。
- **结果呈现**：
  - **文本摘要**：用自然语言总结关键发现（如"您本月销售额 85,000 元，同比增长 37%"）。
  - **数据表格**：当结果是列表时（如客户清单），以表格形式展示。
  - **可视化图表**：当涉及趋势或对比时，生成图表（柱状图、折线图、饼图）。
- **追问能力**：
  - 用户可以基于上一次的查询结果继续追问（如"那这 37% 的增长主要来自哪个产品线？"）。

**5.2.9 技术实现**
- **查询工具化**：将常见的数据分析需求（如"计算团队销售额"、"统计客户增长趋势"）封装为独立的 LangChain Tool。
- **可视化渲染**：前端使用图表库（如 ECharts、Chart.js）根据后端返回的结构化数据渲染图表。

**5.2.10 验收标准**
- 对于常见的 20 种业务问题（需提前定义），查询准确率 ≥ 90%。
- 查询响应时间 < 5 秒（对于大数据量场景，可在后台异步处理并通知用户）。
- 用户对分析结果的满意度 ≥ 85%。

---

### 5.3 阶段三核心功能（未来规划）

#### 功能模块 7：预测性分析
- 基于历史数据，预测销售目标达成概率、客户流失风险、最佳跟进时机等。
- 技术方案：训练机器学习模型（如 XGBoost），或使用 LLM 的推理能力结合少量示例（Few-shot learning）。

#### 功能模块 8：自动化策略执行
- 用户通过自然语言定义一个复杂的、多步骤的业务流程，AI 自动规划并执行。
- 技术方案：采用 LangGraph 构建状态机，支持循环、分支和条件判断。

---

## 6. 产品架构

### 6.1 系统架构图

```
┌─────────────────────────────────────────────────────────────┐
│                      客户的 CRM 系统                          │
│  ┌──────────────┐          ┌──────────────────────┐         │
│  │ CRM 前端页面  │          │  用户 Auth Token      │         │
│  │              │ ────────>│  (通过 postMessage)   │         │
│  │  [iframe]    │          └──────────────────────┘         │
│  │  AI Widget   │                    │                       │
│  └──────┬───────┘                    │                       │
│         │                            ▼                       │
│         │                   ┌─────────────────┐             │
│         └──────────────────>│  CRM 后端 API   │             │
│           (使用 Token 调用)  └─────────────────┘             │
└─────────────────────────────────────────────────────────────┘
                               │
                               │ HTTPS
                               ▼
┌─────────────────────────────────────────────────────────────┐
│                  AI 业务助理产品（我们的系统）                 │
│                                                               │
│  ┌────────────────────────────────────────────────┐         │
│  │            前端层（AI Widget UI）               │         │
│  │  - 聊天界面  - Token 接收  - API 执行器        │         │
│  └────────────────┬───────────────────────────────┘         │
│                   │ WebSocket / REST API                     │
│                   ▼                                           │
│  ┌────────────────────────────────────────────────┐         │
│  │                 应用服务层                       │         │
│  │  ┌──────────────────────────────────────────┐  │         │
│  │  │    LangChain Agent (核心大脑)            │  │         │
│  │  │  - LLM 调用  - 工具编排  - 对话管理      │  │         │
│  │  └──────────────────────────────────────────┘  │         │
│  │  ┌──────────────────────────────────────────┐  │         │
│  │  │         工具层 (Tools)                    │  │         │
│  │  │  - 创建/查询工具  - 规则校验工具          │  │         │
│  │  │  - 模糊匹配工具  - 数据分析工具          │  │         │
│  │  └──────────────────────────────────────────┘  │         │
│  │  ┌──────────────────────────────────────────┐  │         │
│  │  │      CRM 适配器层 (Adapters)             │  │         │
│  │  │  - Salesforce  - HubSpot  - 销售易       │  │         │
│  │  └──────────────────────────────────────────┘  │         │
│  └────────────────────────────────────────────────┘         │
│                   │                                           │
│                   ▼                                           │
│  ┌────────────────────────────────────────────────┐         │
│  │              数据与存储层                        │         │
│  │  - 对话历史 (PostgreSQL/MongoDB)                │         │
│  │  - 产品/客户缓存 (Redis)                        │         │
│  │  - 业务规则配置 (YAML/JSON 文件或数据库)         │         │
│  └────────────────────────────────────────────────┘         │
│                                                               │
└─────────────────────────────────────────────────────────────┘
                               │
                               │ API Call
                               ▼
                    ┌─────────────────────┐
                    │   第三方 LLM 服务    │
                    │  (OpenAI / Claude)   │
                    └─────────────────────┘
```

### 6.2 技术栈选型

| 层级 | 技术选型 | 说明 |
|------|---------|------|
| **前端** | React + TypeScript + Tailwind CSS | 构建 AI Widget UI |
| **前端通信** | WebSocket (Socket.io) | 实现实时对话 |
| **后端框架** | FastAPI (Python) | 高性能异步 API 服务 |
| **AI 框架** | LangChain + LangGraph | Agent 编排和工具调用 |
| **LLM** | OpenAI GPT-4 / Claude 3.5 Sonnet | 核心语言理解能力 |
| **数据库** | PostgreSQL | 存储对话历史、用户配置 |
| **缓存** | Redis | 存储产品/客户等主数据缓存 |
| **任务队列** | Celery + Redis | 处理异步任务（如定时提醒） |
| **可观测性** | LangSmith + Sentry | Agent 调试和错误追踪 |
| **部署** | Docker + Kubernetes / AWS ECS | 容器化部署 |
| **CI/CD** | GitHub Actions | 自动化测试和部署 |

---

## 7. 技术实现方案

### 7.1 核心技术难点与解决方案

#### 难点 1：如何确保 AI 理解准确率？
**解决方案**：
- **Few-shot Prompting**：在 System Prompt 中提供 5-10 个典型的对话示例。
- **工具描述优化**：为每个 Tool 编写详细、明确的 `description`，包括参数说明和使用场景。
- **用户反馈循环**：当 AI 执行出错时，记录错误案例，定期分析并优化 Prompt 或增加新工具。

#### 难点 2：如何处理 CRM API 的多样性？
**解决方案**：适配器模式 + 自动化代码生成。
- **适配器开发流程**：
  1. 分析目标 CRM 的 API 文档，提取关键端点和参数结构。
  2. 创建一个 `{crm_name}_adapter.py` 文件，实现标准接口到该 CRM API 的映射。
  3. （未来）开发一个"适配器生成器"工具，输入 CRM 的 OpenAPI 规范文档，自动生成 80% 的适配器代码。

#### 难点 3：如何确保安全性和权限控制？
**解决方案**：
- **Token 不出客户环境**：我们的后端不存储客户的 Auth Token，所有 API 调用发生在用户浏览器。
- **操作审计日志**：记录每次 AI 触发的 API 调用，包括用户、时间、操作类型、结果，供后续审计。
- **敏感操作二次确认**：对于删除、批量修改等高风险操作，强制要求用户手动确认。

#### 难点 4：如何实现工具函数的自维护？
**解决方案**：基于配置文件的代码生成。
- **工作流**：
  1. 为每个表单创建一个 YAML 配置文件，定义字段、API 端点、业务规则。
  2. 开发一个 Python 脚本（`generate_tools.py`），读取 YAML 文件，使用 Jinja2 模板引擎生成工具函数代码。
  3. 将生成的代码提交到版本控制，部署到生产环境。
  4. 当表单逻辑变更时，只需修改 YAML 文件并重新运行生成脚本。
- **好处**：极大降低维护成本，确保前后端逻辑一致性。

---

### 7.2 关键代码示例（伪代码）

#### 7.2.1 Agent 初始化
```python
from langchain_openai import ChatOpenAI
from langchain.agents import initialize_agent, AgentType
from langchain.memory import ConversationBufferMemory

# 初始化 LLM
llm = ChatOpenAI(temperature=0, model_name="gpt-4")

# 初始化记忆
memory = ConversationBufferMemory(memory_key="chat_history")

# 加载工具
tools = [
    create_customer_tool,
    search_customer_tool,
    fuzzy_search_product_tool,
    create_order_tool,
    # ... 更多工具
]

# 初始化 Agent
agent = initialize_agent(
    tools,
    llm,
    agent=AgentType.CONVERSATIONAL_REACT_DESCRIPTION,
    verbose=True,
    memory=memory,
    max_iterations=5  # 限制最大思考轮数，防止死循环
)
```

#### 7.2.2 适配器示例
```python
# salesforce_adapter.py
class SalesforceAdapter:
    def create_customer(self, name: str, phone: str, email: str = None):
        """将标准的 create_customer 操作转换为 Salesforce API 调用"""
        return {
            "method": "POST",
            "endpoint": "/services/data/v58.0/sobjects/Account",
            "body": {
                "Name": name,
                "Phone": phone,
                "Email__c": email  # 注意：Salesforce 的自定义字段有 __c 后缀
            }
        }

# hubspot_adapter.py
class HubSpotAdapter:
    def create_customer(self, name: str, phone: str, email: str = None):
        """将标准的 create_customer 操作转换为 HubSpot API 调用"""
        return {
            "method": "POST",
            "endpoint": "/crm/v3/objects/contacts",
            "body": {
                "properties": {
                    "firstname": name.split()[0],  # HubSpot 分离姓和名
                    "lastname": name.split()[1] if len(name.split()) > 1 else "",
                    "phone": phone,
                    "email": email
                }
            }
        }
```

#### 7.2.3 前端 API 执行器
```javascript
// AI Widget 中的代码
async function executeAPIInstruction(instruction) {
    const { method, endpoint, body } = instruction;
    const crmBaseURL = window.CRM_CONFIG.apiBaseURL; // 从宿主页面获取
    const authToken = window.AUTH_TOKEN; // 从 postMessage 获取

    try {
        const response = await fetch(`${crmBaseURL}${endpoint}`, {
            method: method,
            headers: {
                'Authorization': `Bearer ${authToken}`,
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(body)
        });

        if (response.ok) {
            const result = await response.json();
            displaySuccessMessage(instruction.feedback_message.on_success);
            return result;
        } else {
            const error = await response.text();
            displayErrorMessage(instruction.feedback_message.on_failure + ": " + error);
            // 可选：将错误信息发回 AI 后端，让 Agent 尝试修复或向用户解释
        }
    } catch (error) {
        console.error('API call failed:', error);
        displayErrorMessage("网络错误，请稍后重试");
    }
}
```

---

## 8. 产品路线图

### 8.1 里程碑规划

| 阶段 | 时间线 | 核心交付物 | 商业目标 |
|------|--------|-----------|---------|
| **MVP 开发** | Q4 2025 (3个月) | 完成阶段一核心功能（自然语言 CRUD + 模糊匹配 + 业务规则） | 内部测试通过 |
| **Alpha 测试** | Q1 2026 (2个月) | 招募 5-10 家种子用户进行封闭测试 | 验证核心功能可用性，收集反馈 |
| **Beta 发布** | Q2 2026 (3个月) | 公开测试，支持 3 个主流 CRM 系统 | 获得 20-50 家付费客户 |
| **阶段二功能上线** | Q3-Q4 2026 (6个月) | 主动提醒 + 对话式数据分析 | 客户续约率 > 80%，NPS > 50 |
| **规模化增长** | 2027 | 支持 10+ CRM 系统，拓展 2-3 个垂直行业 | ARR（年经常性收入）达到 $1M |
| **阶段三功能上线** | 2028 | 预测分析 + 自动化策略 | 成为行业标杆，准备 B 轮融资 |

### 8.2 版本迭代计划

- **v0.1 (MVP)**：仅支持"创建客户"和"创建订单"两个功能，集成 Salesforce。
- **v0.5 (Alpha)**：增加查询、更新功能，支持 HubSpot。
- **v1.0 (Beta)**：完整的阶段一功能，支持 Salesforce, HubSpot, 销售易。
- **v2.0**：阶段二功能上线。
- **v3.0**：阶段三功能上线。

---

## 9. 商业模式

### 9.1 定价策略

#### 定价模型：按席位订阅 (Per Seat Subscription)
- **基础版** - $29/用户/月（年付优惠至 $25/月）
  - 包含阶段一所有功能。
  - 支持 1 个 CRM 系统集成。
  - 每月 1,000 次 AI 对话交互额度。
- **专业版** - $59/用户/月（年付优惠至 $49/月）
  - 包含基础版所有功能 + 阶段二功能（主动提醒 + 数据分析）。
  - 支持多个 CRM 系统集成。
  - 每月 5,000 次 AI 对话交互额度。
  - 优先技术支持。
- **企业版** - 定制报价
  - 包含所有功能 + 阶段三功能（预测分析 + 自动化策略）。
  - 无限 AI 对话额度。
  - 专属客户成功经理。
  - 定制化适配器开发（如果客户使用的是小众 CRM 或自研系统）。
  - SLA 保障（99.9% 可用性）。

### 9.2 收入预测（3 年）

| 年份 | 付费客户数（企业） | ARPU（年均每企业） | ARR（年经常性收入） |
|------|-------------------|------------------|-------------------|
| Y1   | 50                | $10,000          | $500,000          |
| Y2   | 200               | $15,000          | $3,000,000        |
| Y3   | 500               | $20,000          | $10,000,000       |

*假设：每家企业平均 20 个付费席位，专业版占比 70%。*

### 9.3 成本结构

- **LLM API 成本**：约占收入的 15-20%（通过 Prompt 优化和缓存降低）。
- **研发成本**：初期 5-8 人团队，年成本约 $500K。
- **云服务成本**（AWS/GCP）：约占收入的 5-10%。
- **销售与市场**：占收入的 30-40%。

### 9.4 盈利路径
- **目标**：在 Y2 末实现运营盈亏平衡（不含融资）。
- **关键指标**：CAC（客户获取成本） < LTV（客户生命周期价值）的 1/3。

---

## 10. 成功指标

### 10.1 产品指标（Product Metrics）

| 指标 | 定义 | 目标值（MVP） | 目标值（Beta） |
|------|------|-------------|-------------|
| **任务完成率** | 用户发起的意图中，成功被 AI 执行的比例 | ≥ 80% | ≥ 90% |
| **平均任务完成轮数** | 从用户提出需求到执行成功的对话轮数 | ≤ 3 轮 | ≤ 2 轮 |
| **AI 理解准确率** | AI 正确识别用户意图的比例 | ≥ 85% | ≥ 92% |
| **API 调用成功率** | AI 生成的 API 指令执行成功的比例 | ≥ 95% | ≥ 99% |
| **平均响应时间** | 从用户发送消息到收到 AI 回复的时间 | < 3 秒 | < 2 秒 |

### 10.2 用户指标（User Metrics）

| 指标 | 定义 | 目标值 |
|------|------|--------|
| **DAU/MAU** | 日活跃用户数 / 月活跃用户数（衡量用户粘性） | > 0.4 |
| **留存率** | 次日留存 > 60%，7 日留存 > 40%，30 日留存 > 30% | 如左 |
| **NPS（净推荐值）** | 用户推荐产品给他人的意愿 | > 50 (Beta 阶段) |
| **用户平均会话时长** | 用户每次使用产品的平均时长 | 5-10 分钟 |

### 10.3 商业指标（Business Metrics）

| 指标 | 定义 | 目标值 |
|------|------|--------|
| **MRR（月经常性收入）** | 每月的订阅收入总额 | Y1: $40K, Y2: $250K |
| **Churn Rate（流失率）** | 每月取消订阅的客户比例 | < 5% (月度) |
| **CAC（客户获取成本）** | 获得一个新客户的平均成本 | < $1,000 |
| **LTV（客户生命周期价值）** | 一个客户在其整个生命周期内贡献的利润 | > $10,000 |
| **LTV/CAC 比** | 衡量商业模式健康度的关键指标 | > 3:1 |

---

## 11. 风险与挑战

### 11.1 主要风险

| 风险类型 | 具体描述 | 影响程度 | 缓解策略 |
|---------|---------|---------|---------|
| **技术风险** | AI 理解准确率不达标，用户体验差 | 高 | 1. 大量真实场景测试；2. 持续优化 Prompt；3. 引入人工审核机制 |
| **竞争风险** | CRM 巨头推出免费或低价的原生 AI 功能 | 高 | 1. 聚焦垂直行业深耕；2. 建立数据和模型护城河；3. 强化主动性功能（巨头短期难以复制） |
| **集成风险** | 不同 CRM 的 API 差异巨大，适配成本高 | 中 | 1. 初期只支持 2-3 个主流 CRM；2. 开发适配器生成工具；3. 向客户收取定制化集成费用 |
| **商业风险** | 客户付费意愿低于预期 | 中 | 1. 通过 ROI 计算器量化价值；2. 提供免费试用期；3. 建立标杆客户案例 |
| **安全风险** | AI 误操作导致数据损失或业务中断 | 中 | 1. 高危操作强制二次确认；2. 完善的操作审计日志；3. 购买保险 |
| **法律风险** | 数据隐私合规（GDPR, 等保） | 中 | 1. Token 不出客户环境；2. 通过 SOC 2 认证；3. 聘请法律顾问 |

### 11.2 关键假设（需验证）

1. **假设 1**：用户愿意为"效率提升"这一价值支付 $29-59/月的价格。
   - **验证方法**：通过客户访谈和 MVP 付费转化率验证。
2. **假设 2**：CRM 巨头在未来 2 年内不会大规模推广类似功能。
   - **验证方法**：持续跟踪竞品动态，必要时调整战略。
3. **假设 3**：AI 的理解准确率能达到 85% 以上，满足生产环境使用。
   - **验证方法**：通过 Alpha 测试的真实场景数据验证。

---

## 12. 附录

### 12.1 名词解释

- **LLM (Large Language Model)**：大型语言模型，如 GPT-4、Claude。
- **LangChain**：一个用于构建 LLM 应用的开源框架。
- **Agent**：具备"思考-行动-观察"循环能力的 AI 系统。
- **Tool**：Agent 能够调用的功能模块，如"查询客户"、"创建订单"。
- **Adapter**：适配器，用于将标准接口转换为特定 CRM 系统的 API 调用。
- **PMF (Product-Market Fit)**：产品市场契合度，指产品满足市场需求的程度。

### 12.2 参考资料

- LangChain 官方文档: https://python.langchain.com
- Salesforce API 文档: https://developer.salesforce.com
- HubSpot API 文档: https://developers.hubspot.com
- The Mom Test（如何进行有效的客户访谈）

### 12.3 变更记录

| 版本 | 日期 | 变更内容 | 作者 |
|------|------|---------|------|
| v1.0 | 2025-10-05 | 初始版本创建 | [产品经理姓名] |

---

## 审批

| 角色 | 姓名 | 签名 | 日期 |
|------|------|------|------|
| 产品负责人 |  |  |  |
| 技术负责人 |  |  |  |
| CEO |  |  |  |

---

**文档结束**

