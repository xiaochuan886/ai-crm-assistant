---
title: "样式和主题系统"
epic: "frontend-widget-architecture"
number: 3
batch: 1
status: "pending"
priority: "high"
estimated_hours: 10
tags: ["styling", "theme", "responsive", "css-variables"]
parallel: true
depends_on: [1]
assigned_to: ""
reviewer: ""
created_at: "2025-10-07T05:19:46Z"
updated_at: "2025-10-07T05:19:46Z"
---

## 📋 任务概述

实现响应式设计和多主题支持的样式系统，确保小部件能够适配不同的 CRM 系统界面风格和设备尺寸。

## 🎯 验收标准

### 核心要求
- [x] 完整的响应式设计系统
- [x] 多主题切换机制
- [x] CSS 变量系统配置
- [x] 组件样式一致性
- [x] 暗色/亮色模式支持

### 技术标准
- [x] 移动端适配完成
- [x] 主题切换动画流畅
- [x] 样式可定制性强
- [x] 性能优化良好

## 📝 详细任务

### 3.1 响应式设计系统 (3小时)
- 配置 Tailwind CSS 断点系统
- 创建响应式组件样式
- 实现弹性布局和自适应尺寸

### 3.2 主题系统架构 (3小时)
- 设计 CSS 变量命名规范
- 创建主题配置文件
- 实现主题切换机制

### 3.3 预设主题开发 (2小时)
- 实现亮色主题
- 实现暗色主题
- 创建高对比度主题选项

### 3.4 组件样式整合 (2小时)
- 统一 shadcn/ui 组件样式
- 创建自定义组件样式
- 实现样式继承和覆盖机制

## 🔧 技术要求

### CSS 变量系统
```css
:root {
  /* 颜色系统 */
  --widget-primary: 59 130 246;
  --widget-secondary: 107 114 128;
  --widget-accent: 99 102 241;

  /* 间距系统 */
  --widget-spacing-xs: 0.25rem;
  --widget-spacing-sm: 0.5rem;
  --widget-spacing-md: 1rem;
  --widget-spacing-lg: 1.5rem;

  /* 字体系统 */
  --widget-font-size-xs: 0.75rem;
  --widget-font-size-sm: 0.875rem;
  --widget-font-size-base: 1rem;
  --widget-font-size-lg: 1.125rem;

  /* 阴影系统 */
  --widget-shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  --widget-shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
  --widget-shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
}

[data-theme="dark"] {
  --widget-primary: 96 165 250;
  --widget-secondary: 156 163 175;
  --widget-accent: 129 140 248;
}
```

### 主题配置
```typescript
interface ThemeConfig {
  name: string;
  colors: {
    primary: string;
    secondary: string;
    accent: string;
    background: string;
    foreground: string;
  };
  spacing: Record<string, string>;
  typography: {
    fontFamily: string;
    fontSize: Record<string, string>;
  };
}

const themes: Record<string, ThemeConfig> = {
  light: { /* 亮色主题配置 */ },
  dark: { /* 暗色主题配置 */ },
  highContrast: { /* 高对比度主题配置 */ }
};
```

### 响应式断点
```typescript
const breakpoints = {
  xs: '375px',  // 手机竖屏
  sm: '640px',  // 手机横屏/小平板
  md: '768px',  // 平板
  lg: '1024px', // 小型桌面
  xl: '1280px', // 桌面
  '2xl': '1536px' // 大型桌面
};
```

### 组件样式规范
- 使用语义化的 CSS 类名
- 遵循 BEM 命名规范
- 支持主题变量动态切换
- 保持组件样式独立性

## ✅ 测试要求

- [x] 各断点下布局正常
- [x] 主题切换无闪烁
- [x] 暗色模式显示正确
- [x] 自定义主题生效
- [x] 动画过渡流畅

## 🚀 交付物

- [x] 完整的主题系统配置
- [x] 响应式设计实现
- [x] 多套预设主题
- [x] 主题切换工具类
- [x] 样式使用文档

## 📚 参考资料

- [Tailwind CSS 响应式设计](https://tailwindcss.com/docs/responsive-design)
- [CSS 自定义属性](https://developer.mozilla.org/en-US/docs/Web/CSS/--*)
- [CSS 变量和主题切换](https://web.dev/building-a-theme-switch-component/)
- [Design Tokens](https://designsystemsrepo.com/design-tokens/)
